

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>2. 安装设置 &mdash; writebysphinx 1.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/theme_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="3. 基本用法" href="usage.html" />
    <link rel="prev" title="1. sphinx简介" href="intro.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> writebysphinx
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">目录</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">1. sphinx介绍</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">2. 环境安装</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#python">2.1. 安装Python虚拟机</a></li>
<li class="toctree-l2"><a class="reference internal" href="#sphinx">2.2. 安装sphinx</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#linux">2.2.1. 安装到Linux</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#debian-ubuntu">2.2.1.1. Debian/Ubuntu</a></li>
<li class="toctree-l4"><a class="reference internal" href="#rhel-centos">2.2.1.2. RHEL, CentOS</a></li>
<li class="toctree-l4"><a class="reference internal" href="#other-distributions">2.2.1.3. Other distributions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#macos">2.2.2. 安装到macOS</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#homebrew">2.2.2.1. Homebrew</a></li>
<li class="toctree-l4"><a class="reference internal" href="#macports">2.2.2.2. MacPorts</a></li>
<li class="toctree-l4"><a class="reference internal" href="#anaconda">2.2.2.3. Anaconda</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#windows">2.2.3. 安装到Windows</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#installation-from-pypi">2.2.3.1. Installation from PyPI</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#vscode">2.3. 安装VSCode</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id11">2.4. 安装主题</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#conf-py">2.4.1. 在conf.py配置</a></li>
<li class="toctree-l3"><a class="reference internal" href="#solve-too-big-width-table-problem">2.4.2. 解决表格过宽问题</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#index-2">2.5. 安装画图工具</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#sphinxcontrib-plantuml">2.5.1. 安装sphinxcontrib-plantuml</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#pip">2.5.1.1. pip安装</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id15">2.5.1.2. 下载安装</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id16">2.5.2. 修改Sphinx文档配置</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plantuml-jar">2.5.3. 下载 plantuml.jar 文件</a></li>
<li class="toctree-l3"><a class="reference internal" href="#graphviz">2.5.4. 安装 graphviz</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#pdf">2.6. 安装PDF转换工具</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">3. 基本用法</a></li>
<li class="toctree-l1"><a class="reference internal" href="FAQ.html">4. FAQ</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">writebysphinx</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>2. 安装设置</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/install.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="id1">
<h1>2. 安装设置<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<p>你不必安装本文所列的所有程序，实际上你只需要一个文本编辑器就能参与编写sphinx文档，通过git或svn等版本管理工具，
整个团队可以进行有效协作，而将文本编译为html或pdf，可以交给服务器去做。</p>
<p>如果你要重度参与编写sphinx文档，那么安装本文所列工具后，你将获得非常强大的文档编辑的能力，包括布局、画图、建立
索引、自动化格式（尤其是各种代码格式）、内容参数化以及一些自动化功能。</p>
<div class="section" id="python">
<span id="index-0"></span><h2>2.1. 安装Python虚拟机<a class="headerlink" href="#python" title="Permalink to this headline">¶</a></h2>
<p>为什么要用虚拟机？ <a class="reference external" href="https://blog.csdn.net/godot06/article/details/81079064">这里参考一个博客的说法如下</a></p>
<p>在实际项目开发中，我们通常会根据自己的需求去下载各种相应的框架库，
如Scrapy、Beautiful Soup等，但是可能每个项目使用的框架库并不一样，
或使用框架的版本不一样，这样需要我们根据需求不断的更新或卸载相应的库。
直接怼我们的Python环境操作会让我们的开发环境和项目造成很多不必要的麻烦，
管理也相当混乱。</p>
<p>场景1：项目A需要某个框架1.0版本，项目B需要这个库的2.0版本。
如果没有安装虚拟环境，那么当你使用这两个项目时，你就需要来回的卸载
安装了，这样很容易就给你的项目带来莫名的错误。</p>
<p>场景2：公司之前的项目需要python2.7环境下运行，而你接手的项目需要在
python3环境中运行，想想就应该知道，如果不使用虚拟环境，这这两个项目
可能无法同时使用，使用python3则公司之前的项目可能无法运行，反之则
新项目运行有麻烦。而如果虚拟环境可以分别为这两个项目配置不同的运行环境，
这样两个项目就可以同时运行。</p>
<p>下面是安装Python虚拟机的简单方法：</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1">#安装python虚拟环境应用</span>
$ pip install virtualenv
<span class="c1">#或者用 pip3 install virtualenv</span>

<span class="c1">#新建python虚拟机目录，并创建虚拟机，我这里用sphinx-doc作为虚拟机名字</span>
MacBook:~ vik.qian$ mkdir pyenv
MacBook:pyenv vik.qian$ <span class="nb">cd</span> pyenv
MacBook:pyenv vik.qian$ virtualenv sphinx-doc

<span class="c1">#激活虚拟机</span>
MacBook:pyenv vik.qian$ <span class="nb">source</span> sphinx-doc/bin/activate
<span class="o">(</span>sphinx-doc<span class="o">)</span> MacBook:pyenv vik.qian$
<span class="c1">#前面多了个括号，说明进入了虚拟机</span>

<span class="c1">#退出虚拟机</span>
<span class="o">(</span>sphinx-doc<span class="o">)</span> MacBook:pyenv vik.qian$ deactivate
</pre></div>
</div>
</div>
<div class="section" id="sphinx">
<span id="index-1"></span><h2>2.2. 安装sphinx<a class="headerlink" href="#sphinx" title="Permalink to this headline">¶</a></h2>
<div class="section" id="linux">
<h3>2.2.1. 安装到Linux<a class="headerlink" href="#linux" title="Permalink to this headline">¶</a></h3>
<p>当然是通过 <a class="reference external" href="http://www.sphinx-doc.org/en/master/usage/installation.html">官网链接</a> 说明安装，以下English内容引用官网。</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>使用命令请在相应的python虚拟机运行安装</p>
</div>
<div class="section" id="debian-ubuntu">
<h4>2.2.1.1. Debian/Ubuntu<a class="headerlink" href="#debian-ubuntu" title="Permalink to this headline">¶</a></h4>
<p>Install either <code class="docutils literal notranslate"><span class="pre">python3-sphinx</span></code> (Python 3) or <code class="docutils literal notranslate"><span class="pre">python-sphinx</span></code> (Python 2)
using <strong class="command">apt-get</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ apt-get install python3-sphinx
</pre></div>
</div>
<p>If it not already present, this will install Python for you.</p>
</div>
<div class="section" id="rhel-centos">
<h4>2.2.1.2. RHEL, CentOS<a class="headerlink" href="#rhel-centos" title="Permalink to this headline">¶</a></h4>
<p>Install <code class="docutils literal notranslate"><span class="pre">python-sphinx</span></code> using <strong class="command">yum</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ yum install python-sphinx
</pre></div>
</div>
<p>If it not already present, this will install Python for you.</p>
</div>
<div class="section" id="other-distributions">
<h4>2.2.1.3. Other distributions<a class="headerlink" href="#other-distributions" title="Permalink to this headline">¶</a></h4>
<p>Most Linux distributions have Sphinx in their package repositories.  Usually
the package is called <code class="docutils literal notranslate"><span class="pre">python3-sphinx</span></code>, <code class="docutils literal notranslate"><span class="pre">python-sphinx</span></code> or <code class="docutils literal notranslate"><span class="pre">sphinx</span></code>.  Be
aware that there are at least two other packages with <code class="docutils literal notranslate"><span class="pre">sphinx</span></code> in their name:
a speech recognition toolkit (<em>CMU Sphinx</em>) and a full-text search database
(<em>Sphinx search</em>).</p>
</div>
</div>
<div class="section" id="macos">
<h3>2.2.2. 安装到macOS<a class="headerlink" href="#macos" title="Permalink to this headline">¶</a></h3>
<p>Sphinx can be installed using <a class="reference external" href="https://brew.sh/">Homebrew</a>, <a class="reference external" href="https://www.macports.org/">MacPorts</a>, or as part of
a Python distribution such as <a class="reference external" href="https://www.anaconda.com/download/#macos">Anaconda</a>.</p>
<div class="section" id="homebrew">
<h4>2.2.2.1. Homebrew<a class="headerlink" href="#homebrew" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ brew install sphinx-doc
</pre></div>
</div>
<p>For more information, refer to the <a class="reference external" href="https://formulae.brew.sh/formula/sphinx-doc">package overview</a>.</p>
</div>
<div class="section" id="macports">
<h4>2.2.2.2. MacPorts<a class="headerlink" href="#macports" title="Permalink to this headline">¶</a></h4>
<p>Install either <code class="docutils literal notranslate"><span class="pre">python36-sphinx</span></code> (Python 3) or <code class="docutils literal notranslate"><span class="pre">python27-sphinx</span></code> (Python 2)
using <strong class="command">port</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo port install py36-sphinx
</pre></div>
</div>
<p>To set up the executable paths, use the <code class="docutils literal notranslate"><span class="pre">port</span> <span class="pre">select</span></code> command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo port select --set python python36
$ sudo port select --set sphinx py36-sphinx
</pre></div>
</div>
<p>For more information, refer to the <a class="reference external" href="https://www.macports.org/ports.php?by=library&amp;substr=py36-sphinx">package overview</a>.</p>
</div>
<div class="section" id="anaconda">
<h4>2.2.2.3. Anaconda<a class="headerlink" href="#anaconda" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ conda install sphinx
</pre></div>
</div>
</div>
</div>
<div class="section" id="windows">
<h3>2.2.3. 安装到Windows<a class="headerlink" href="#windows" title="Permalink to this headline">¶</a></h3>
<p>Most Windows users do not have Python installed by default, so we begin with
the installation of Python itself.  To check if you already have Python
installed, open the <em>Command Prompt</em> (<kbd class="kbd docutils literal notranslate">âŠžWin-r</kbd> and type <strong class="command">cmd</strong>).
Once the command prompt is open, type <strong class="command">python --version</strong> and press
Enter.  If Python is installed, you will see the version of Python printed to
the screen.  If you do not have Python installed, refer to the <a class="reference external" href="https://docs.python-guide.org/">Hitchhikers
Guide to Python’s</a> Python on Windows installation guides. You must install
<a class="reference external" href="https://docs.python-guide.org/starting/install3/win/">Python 3</a>.</p>
<p>Once Python is installed, you can install Sphinx using <strong class="command">pip</strong>.  Refer
to the <a class="reference internal" href="#install-pypi"><span class="std std-ref">pip installation instructions</span></a> below for more
information.</p>
<div class="section" id="installation-from-pypi">
<span id="install-pypi"></span><h4>2.2.3.1. Installation from PyPI<a class="headerlink" href="#installation-from-pypi" title="Permalink to this headline">¶</a></h4>
<p>Sphinx packages are published on the <a class="reference external" href="https://pypi.org/project/Sphinx/">Python Package Index</a>.  The preferred tool for installing
packages from <em>PyPI</em> is <strong class="command">pip</strong>.  This tool is provided with all modern
versions of Python.</p>
<p>On Linux or MacOS, you should open your terminal and run the following command.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pip install -U sphinx
</pre></div>
</div>
<p>On Windows, you should open <em>Command Prompt</em> (<kbd class="kbd docutils literal notranslate">âŠžWin-r</kbd> and type
<strong class="command">cmd</strong>) and run the same command.</p>
<div class="highlight-doscon notranslate"><div class="highlight"><pre><span></span><span class="gp">C:\&gt;</span> pip install -U sphinx
</pre></div>
</div>
<p>After installation, type <strong class="command">sphinx-build --version</strong> on the command
prompt.  If everything worked fine, you will see the version number for the
Sphinx package you just installed.</p>
<p>Installation from <em>PyPI</em> also allows you to install the latest development
release.  You will not generally need (or want) to do this, but it can be
useful if you see a possible bug in the latest stable release.  To do this, use
the <code class="docutils literal notranslate"><span class="pre">--pre</span></code> flag.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pip install -U --pre sphinx
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="vscode">
<h2>2.3. 安装VSCode<a class="headerlink" href="#vscode" title="Permalink to this headline">¶</a></h2>
<p>Visual Studio Code 可能是我使用过的最酷的文档编辑器，超级好用，且有很多插件，强烈推荐使用VSCode写sphinx文档。
正如，我现在在使用的，VSCode也支持reStructuredText语言，且支持实时预览 – 如果你习惯于写Markdown时实时预览的话，
你会喜欢的。VSCode安装地址 <a class="reference external" href="https://code.visualstudio.com/">https://code.visualstudio.com/</a> 。</p>
<div class="figure align-center" id="id20">
<a class="reference internal image-reference" href="_images/vscodescreen.png"><img alt="_images/vscodescreen.png" src="_images/vscodescreen.png" style="width: 95%;" /></a>
<p class="caption"><span class="caption-text">用 Visual Studio Code编辑reStructuredText，并渲染为html</span><a class="headerlink" href="#id20" title="Permalink to this image">¶</a></p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>如果系统有多个版本python，配置不对可能导致VSCode渲染html失败，可以在VSCode setting中设置python的path，从而使用正确的版本：
<code class="docutils literal notranslate"><span class="pre">&quot;python.pythonPath&quot;:</span> <span class="pre">&quot;/Users/vik.qian/pythonvenvs/sphinx-doc/bin/python3</span></code> ，如下图：</p>
</div>
<div class="figure align-center" id="id21">
<a class="reference internal image-reference" href="_images/vscodesetting.png"><img alt="_images/vscodesetting.png" src="_images/vscodesetting.png" style="width: 80%;" /></a>
<p class="caption"><span class="caption-text">setting.json中设置python版本</span><a class="headerlink" href="#id21" title="Permalink to this image">¶</a></p>
</div>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>注意：VSCode可以安装许多插件，一些插件会影响编辑习惯，比如如果安装了默认VIM风格的输入方式，
那么你必须按照VIM方式进行输入，如果不习惯则可以考虑禁用这些插件。</p>
</div>
</div>
<div class="section" id="id11">
<h2>2.4. 安装主题<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h2>
<p>sphinx默认主题alabaster太素，可以选一个最经典的主题 <a class="reference external" href="https://sphinx-rtd-theme.readthedocs.io/en/stable/">sphinx_rtd_theme</a> ，
直接用这个命令装：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">sphinx_rtd_theme</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>命令请在相应的python虚拟机运行安装</p>
</div>
<div class="section" id="conf-py">
<h3>2.4.1. 在conf.py配置<a class="headerlink" href="#conf-py" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sphinx_rtd_theme</span>
<span class="n">html_theme</span> <span class="o">=</span> <span class="s1">&#39;sphinx_rtd_theme</span>
</pre></div>
</div>
</div>
<div class="section" id="solve-too-big-width-table-problem">
<span id="id12"></span><h3>2.4.2. 解决表格过宽问题<a class="headerlink" href="#solve-too-big-width-table-problem" title="Permalink to this headline">¶</a></h3>
<p>主题 <em>sphinx_rtd_theme</em> 的表格有个内容无法换行的bug，导致许多表格过宽，
参考这个 <a class="reference external" href="https://rackerlabs.github.io/docs-rackspace/tools/rtd-tables.html">网站</a>
的方法，重载css并在conf.py配置后，就可以解决。</p>
<p>The <strong>Read the Docs</strong> Sphinx theme contains a bug that causes text in table
cells not to wrap. This results in very wide tables with horizontal scroll
bars.</p>
<p>You can workaround this issue by defining a custom CCS override file.</p>
<ol class="arabic">
<li><p>Change into your documentation directory. This is usually where
the <code class="docutils literal notranslate"><span class="pre">index.rst</span></code> and <code class="docutils literal notranslate"><span class="pre">conf.py</span></code> files are located:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cd doc
</pre></div>
</div>
</li>
<li><p>If it does not already exist, create a <code class="docutils literal notranslate"><span class="pre">_static</span></code> directory:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ mkdir _static
</pre></div>
</div>
</li>
<li><p>Create a <code class="docutils literal notranslate"><span class="pre">theme_overrides.css</span></code> file in the <code class="docutils literal notranslate"><span class="pre">_static</span></code> directory:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ touch _static/theme_overrides.css
</pre></div>
</div>
</li>
<li><p>Open the <code class="docutils literal notranslate"><span class="pre">theme_overrides.css</span></code> file and add the following CSS:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>/* override table width restrictions */
@media screen and (min-width: 767px) {

   .wy-table-responsive table td {
      /* !important prevents the common CSS stylesheets from overriding
         this as on RTD they are loaded after this stylesheet */
      white-space: normal !important;
   }

   .wy-table-responsive {
      overflow: visible !important;
   }
}
</pre></div>
</div>
</li>
<li><p>Open the <code class="docutils literal notranslate"><span class="pre">conf.py</span></code> file and add the following configuration options:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">html_static_path</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;_static&#39;</span><span class="p">]</span>

<span class="n">html_context</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;css_files&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s1">&#39;_static/theme_overrides.css&#39;</span><span class="p">,</span>  <span class="c1"># override wide tables in RTD theme</span>
        <span class="p">],</span>
     <span class="p">}</span>
</pre></div>
</div>
</li>
<li><p>Build your documentation using Sphinx and check the tables; cells should
now wrap correctly.</p></li>
</ol>
</div>
</div>
<div class="section" id="index-2">
<span id="id14"></span><h2>2.5. 安装画图工具<a class="headerlink" href="#index-2" title="Permalink to this headline">¶</a></h2>
<p>文档中的图最好都能够用脚本描述，工具自动画，这样有利于版本维护，推荐使用plantuml和Graphviz，
前者用来画UML图，后者可以画状态转移图。</p>
<div class="section" id="sphinxcontrib-plantuml">
<h3>2.5.1. 安装sphinxcontrib-plantuml<a class="headerlink" href="#sphinxcontrib-plantuml" title="Permalink to this headline">¶</a></h3>
<p>plantuml.jar是个java程序，运行起来有点慢，但功能强大，也还能接受。</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>使用命令请在相应的python虚拟机运行安装</p>
</div>
<div class="section" id="pip">
<h4>2.5.1.1. pip安装<a class="headerlink" href="#pip" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">sphinxcontrib</span><span class="o">-</span><span class="n">plantuml</span>
</pre></div>
</div>
</div>
<div class="section" id="id15">
<h4>2.5.1.2. 下载安装<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h4>
<p>点击官网页面“Download”链接下载。
下载完，解压，运行命令：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">install</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id16">
<h3>2.5.2. 修改Sphinx文档配置<a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h3>
<p>找到文档目录中的conf.py文件，添加extension和plantuml调用指令。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>

<span class="c1"># Add any Sphinx extension module names here, as strings. They can be</span>
<span class="c1"># extensions coming with Sphinx (named &#39;sphinx.ext.*&#39;) or your custom</span>
<span class="c1"># ones.</span>
<span class="n">extensions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;sphinxcontrib.plantuml&#39;</span><span class="p">,</span>
              <span class="s1">&#39;sphinx.ext.graphviz&#39;</span><span class="p">]</span>

<span class="c1"># 设置 plantuml.jar 路径</span>
<span class="n">currentpath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39;/&#39;</span>
<span class="n">plantuml</span> <span class="o">=</span> <span class="s1">&#39;java -jar &#39;</span> <span class="o">+</span> <span class="n">currentpath</span> <span class="o">+</span> <span class="s1">&#39;plantuml.jar&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="plantuml-jar">
<h3>2.5.3. 下载 plantuml.jar 文件<a class="headerlink" href="#plantuml-jar" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="http://plantuml.com/zh/download">下载 plantuml.jar 文件</a>，plantuml放在当前工程目录（因为conf.py中，假设是放在当前工作目录
<code class="docutils literal notranslate"><span class="pre">currentpath</span> <span class="pre">=</span> <span class="pre">os.getcwd()</span> <span class="pre">+</span> <span class="pre">'/'</span></code> ）。</p>
<div class="figure align-center" id="id22">
<a class="reference internal image-reference" href="_images/download-plantuml.png"><img alt="_images/download-plantuml.png" src="_images/download-plantuml.png" style="width: 80%;" /></a>
<p class="caption"><span class="caption-text">注意 plantuml放对目录以便 java命令能找到它</span><a class="headerlink" href="#id22" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="graphviz">
<h3>2.5.4. 安装 graphviz<a class="headerlink" href="#graphviz" title="Permalink to this headline">¶</a></h3>
<p>Graphviz是一个很轻量的软件，性能非常好，用起来飞一样。</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>使用命令请在相应的python虚拟机运行安装</p>
</div>
<p><a class="reference external" href="https://pypi.org/project/graphviz/">Graphviz的安装说明网站</a> ，最简单的安装命令如下</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pip install graphviz
</pre></div>
</div>
<p>需要在conf.py中进行如下配置：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">extensions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;sphinxcontrib.plantuml&#39;</span><span class="p">,</span>
            <span class="s1">&#39;sphinx.ext.graphviz&#39;</span><span class="p">]</span>

<span class="c1"># 设置 graphviz_dot 布局风格</span>
<span class="c1"># dot 默认布局方式，主要用于有向图</span>
<span class="c1"># neato 基于spring-model(又称force-based)算法   基于斥力+张力的布局</span>
<span class="c1"># twopi 径向布局</span>
<span class="c1"># circo 圆环布局</span>
<span class="c1"># osage</span>
<span class="c1"># fdp 用于无向图</span>
<span class="c1"># sfdp 用于无向图</span>
<span class="n">graphviz_dot</span> <span class="o">=</span> <span class="s1">&#39;dot&#39;</span>

<span class="c1"># 设置 graphviz_dot_args 的参数，这里默认了默认字体</span>
<span class="n">graphviz_dot_args</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;-Gfontname=Georgia&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;-Nfontname=Georgia&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;-Efontname=Georgia&#39;</span><span class="p">]</span>
<span class="c1"># 输出格式，默认png，这里我用svg矢量图</span>
<span class="n">graphviz_output_format</span> <span class="o">=</span> <span class="s1">&#39;svg</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="pdf">
<span id="index-3"></span><h2>2.6. 安装PDF转换工具<a class="headerlink" href="#pdf" title="Permalink to this headline">¶</a></h2>
<p>有时候文档需要发布到pdf，<a class="reference external" href="https://dormouse-youngs-blog.readthedocs.io/en/latest/rst-pdf.html">这篇博客写了如何转pdf</a> ，我还没试过，
主要是 MacTeX/TeXLive 太大，适合装在服务器端。</p>
<p>另外，如果你使用readthedocs来发布文档，那么readthedocs也会同时自动生成pdf，还是比较方便的。</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="usage.html" class="btn btn-neutral float-right" title="3. 基本用法" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="intro.html" class="btn btn-neutral float-left" title="1. sphinx简介" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Vik

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>